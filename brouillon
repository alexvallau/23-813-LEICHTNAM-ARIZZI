Question 8 : Rédiger les tests mis en œuvre pour valider le fonctionnement du réseau. Ici les tests
demandés doivent permettre de vérifier de manière exhaustive le fonctionnement de VRRP et aussi de
l’ensemble des mécanismes assurant de la haute disponibilité. Ainsi, les tests sont un moyen de mieux
comprendre le fonctionnement du réseau et de valider les résultats de l’étude théorique

Réponse 8 :

Test de basculement :

Pour tester le basculement des routeur ce qu'on peux faire c'est désactiver l'interface du routeur maitre. 

Routeur1 (maitre) :

interface GigabitEthernet2
 ip address 10.100.4.1 255.255.255.0
 shutdown

Une fois l'interface déconnecter, le routeur2 qui est esclave va prendre le relais en tant que routeur maitre.

Routeur2 (esclave -> maitre)

R2#show vrrp
GigabitEthernet2 - Group 1
  State is Backup
  Virtual IP address is 10.100.4.5
  Virtual MAC address is 0000.5e00.0101
  Advertisement interval is 1.000 sec
  Preemption enabled
  Priority is 100
  Master Router is 10.100.4.1, priority is 150
  Master Advertisement interval is 1.000 sec
  Master Down interval is 3.609 sec (expires in 3.605 sec)

En faisant un show vrrp, on voit que le routeur est devenu le routeur maitre.

En faisant un ping vers l'addresse 10.100.4.5, et qu'on coupe l'interface du routeur maitre on voit que le routeur esclave prend le relais car le ping ne se coupe pas.

PING 10.100.4.5 (10.100.4.5) 56(84) octets de données.
64 octets de 10.100.4.5 : icmp_seq=1 ttl=255 temps=0.703 ms
64 octets de 10.100.4.5 : icmp_seq=2 ttl=255 temps=0.616 ms
64 octets de 10.100.4.5 : icmp_seq=3 ttl=255 temps=0.726 ms
64 octets de 10.100.4.5 : icmp_seq=4 ttl=255 temps=0.600 ms




--------------------------------------------------------------------------------------------------------------------------------------

snmp-server user snmpuser snmpv3group v3 auth sha auth_pass priv aes 128 crypt_pass


snmp-server community 123test123 RO

Test :

[etudiant@localhost ~]$ snmpwalk -v2c -c 123test123 10.100.4.2
SNMPv2-MIB::sysDescr.0 = STRING: Cisco IOS Software, CSR1000V Software (X86_64_L                                                                                                                              INUX_IOSD-UNIVERSALK9-M), Version 15.4(1)S2, RELEASE SOFTWARE (fc3)
Technical Support: http://www.cisco.com/techsupport
Copyright (c) 1986-2014 by Cisco Systems, Inc.
Compiled Tue 27-May-14 10:11 by mcpre
SNMPv2-MIB::sysObjectID.0 = OID: SNMPv2-SMI::enterprises.9.1.1537
DISMAN-EVENT-MIB::sysUpTimeInstance = Timeticks: (998516) 2:46:25.16
SNMPv2-MIB::sysContact.0 = STRING: "leichtnam"
SNMPv2-MIB::sysName.0 = STRING: R2
SNMPv2-MIB::sysLocation.0 = STRING: "pm19"
SNMPv2-MIB::sysServices.0 = INTEGER: 78
SNMPv2-MIB::sysORLastChange.0 = Timeticks: (0) 0:00:00.00
IF-MIB::ifNumber.0 = INTEGER: 5
IF-MIB::ifIndex.1 = INTEGER: 1
IF-MIB::ifIndex.2 = INTEGER: 2
IF-MIB::ifIndex.3 = INTEGER: 3
IF-MIB::ifIndex.4 = INTEGER: 4
IF-MIB::ifIndex.5 = INTEGER: 5
IF-MIB::ifDescr.1 = STRING: GigabitEthernet1
IF-MIB::ifDescr.2 = STRING: GigabitEthernet2

sudo tshark -i <interface> -c 1 -Y "snmp && udp.port == 161" -x > capture_snmp.txt
